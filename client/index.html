<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui" />
    <title>UPS Status</title>
    <meta name="description" content="A websocket client reading data from a Bicker PSZ-1063 uExtension module in combination with their UPS." />
    <meta name="author" content="Michael Wolf" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
    <script type="text/javascript" src="./js/index.js"></script>
    <style>
      .input-group {
        margin: 0.2em;
      }
      .input-group > .form-control,
      .input-group > .form-floating,
      .input-group > .form-select {
        flex: 0.3 0 auto;
        min-width: 10%;
      }
      .col-form-label {
        flex: 0.3 0 auto;
        width: 6em;
      }
      .input-group-text {
        min-width: 3em;
      }
      .spinner {
        position: fixed;
        z-index: 1;
        top: 50%;
        left: 50%;
        width: 5rem;
        height: 5rem;
      }
      .checkbox-label {
        width: 12em;
      }
    </style>
  </head>
  <body class="m-1">
    <div id="connectionSpinner" class="spinner spinner-border" role="status"></div>
    <h1><img src="img/favicon32.png" class="img-fluid me-3" />UPS Status</h1>
    <div class="d-flex flex-row flex-wrap justify-content-start">
      <div class="m-1">
        <div class="row">
          <label for="fieldSeries" class="col-sm-2 col-form-label">Series:</label>
          <div class="col-sm-4">
            <input type="text" readonly class="form-control-plaintext" id="fieldSeries" />
          </div>
        </div>
        <div class="row">
          <label for="fieldType" class="col-sm-2 col-form-label">Type:</label>
          <div class="col-sm-4">
            <input type="text" readonly class="form-control-plaintext" id="fieldType" />
          </div>
        </div>
        <div class="row">
          <label for="fieldHardware" class="col-sm-2 col-form-label">Hardware:</label>
          <div class="col-sm-4">
            <input type="text" readonly class="form-control-plaintext" id="fieldHardware" />
          </div>
        </div>
        <div class="row">
          <label for="fieldFirmware" class="col-sm-2 col-form-label">Firmware:</label>
          <div class="col-sm-4">
            <input type="text" readonly class="form-control-plaintext" id="fieldFirmware" />
          </div>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Input Voltage</span>
          <input id="fieldInputVoltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Input Current</span>
          <input id="fieldInputCurrent" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">A</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Input Power</span>
          <input id="fieldInputPower" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">W</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Output Voltage</span>
          <input id="fieldOutputVoltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Output Current</span>
          <input id="fieldOutputCurrent" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">A</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Output Power</span>
          <input id="fieldOutputPower" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">W</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Battery Voltage</span>
          <input id="fieldBatteryVoltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Battery Current</span>
          <input id="fieldBatteryCurrent" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">A</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Cell 1 Voltage</span>
          <input id="fieldCell1Voltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Cell 2 Voltage</span>
          <input id="fieldCell2Voltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Cell 3 Voltage</span>
          <input id="fieldCell3Voltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Cell 4 Voltage</span>
          <input id="fieldCell4Voltage" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">V</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Capacity</span>
          <input id="fieldCapacity" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">F</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">ESR</span>
          <input id="fieldEsr" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">mΩ</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">State of Charge</span>
          <input id="fieldSoc" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">%</span>
        </div>
        <div class="input-group">
          <span class="input-group-text col-form-label">Board Temperature</span>
          <input id="fieldBoardTemperature" type="text" class="form-control" />
          <span class="input-group-text col-sm-1">°C</span>
        </div>
      </div>
      <div class="m-1">
        <div class="card" style="width: fit-content">
          <div class="card-header">Device Status</div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Charging</span>
            <div class="input-group-text">
              <input id="checkDevCharging" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Discharging</span>
            <div class="input-group-text">
              <input id="checkDevDischarging" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Power Present</span>
            <div class="input-group-text">
              <input id="checkDevPowerPresent" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Battery Present</span>
            <div class="input-group-text">
              <input id="checkDevBatteryPresent" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Shutdown Set</span>
            <div class="input-group-text">
              <input id="checkDevShutdownSet" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Over Current</span>
            <div class="input-group-text">
              <input id="checkDevOverCurrent" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
        </div>
      </div>
      <div class="m-1">
        <div class="card" style="width: fit-content">
          <div class="card-header">Charging Status</div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Charging</span>
            <div class="input-group-text">
              <input id="checkCharging" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Backup</span>
            <div class="input-group-text">
              <input id="checkBackup" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Constant Voltage</span>
            <div class="input-group-text">
              <input id="checkConstantVoltage" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Constant Current</span>
            <div class="input-group-text">
              <input id="checkConstantCurrent" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Under Voltage</span>
            <div class="input-group-text">
              <input id="checkUnderVoltage" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Input Current Limit</span>
            <div class="input-group-text">
              <input id="checkInputCurrentLimit" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Capacitor Power Good</span>
            <div class="input-group-text">
              <input id="checkCapacitorPowerGood" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Capacitor Shunting</span>
            <div class="input-group-text">
              <input id="checkCapacitorShunting" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Capacitor Balancing</span>
            <div class="input-group-text">
              <input id="checkCapacitorBalancing" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Charger disabled</span>
            <div class="input-group-text">
              <input id="checkCharging" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Input power fail</span>
            <div class="input-group-text">
              <input id="checkInputPowerFail" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
        </div>
      </div>
      <div class="m-1">
        <div class="card" style="width: fit-content">
          <div class="card-header">Monitoring Status</div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Cap/ESR running</span>
            <div class="input-group-text">
              <input id="checkCapEsrMeasurement" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Cap/ESR time</span>
            <div class="input-group-text">
              <input id="checkCapEsrWaitingTime" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Cap/ESR condition</span>
            <div class="input-group-text">
              <input id="checkCapEsrWaitingCondition" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Cap complete</span>
            <div class="input-group-text">
              <input id="checkCapMeasurementComplete" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">ESR complete</span>
            <div class="input-group-text">
              <input id="checkEsrMeasurementComplete" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Cap fail</span>
            <div class="input-group-text">
              <input id="checkCapMeasurementFail" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">ESR fail</span>
            <div class="input-group-text">
              <input id="checkEsrMeasurementFail" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Charger disabled</span>
            <div class="input-group-text">
              <input id="checkChargerDisabled" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
          <div class="input-group">
            <span class="input-group-text checkbox-label">Charger enabled</span>
            <div class="input-group-text">
              <input id="checkChargerEnabled" class="form-check-input mt-0" type="checkbox" />
            </div>
          </div>
        </div>
      </div>
      <div class="m-1">
        <button id="buttonCapEsr" type="button" class="btn btn-info">Start Cap/ESR Measurement</button>
      </div>
    </div>
    <footer class="fw-lighter fix-bottom float-right">
      UPS Status v1.0, 2023 Michael Wolf, <a href="https://www.mictronics.de" target="_blank">mictronics.de</a>
    </footer>
  </body>
</html>
